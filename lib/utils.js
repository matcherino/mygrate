// Generated by CoffeeScript 1.7.1
(function() {
  var spawn, _;

  spawn = require('child_process').spawn;

  _ = require('underscore');

  exports.spawn = function(command, args, opts, cb) {
    var cmd;
    cmd = spawn(command, args, opts);
    if (opts.env_add) {
      opts.env = _.clone(process.env);
      _.extend(opts.env, opts.env_add);
    }
    if (cmd.stdout) {
      cmd.stdout.on('data', function(data) {
        return console.log(data.toString());
      });
    }
    if (cmd.stderr) {
      cmd.stderr.on('data', function(data) {
        return console.error(data.toString());
      });
    }
    return cmd.on('close', function(code) {
      return cb(code);
    });
  };

  exports.launch = function(command, args, opts) {
    var cmd;
    cmd = spawn(command, args, opts);
    return cmd.unref();
  };

}).call(this);
